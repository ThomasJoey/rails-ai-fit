<!-- app/views/profiles/show.html.erb -->
<div class="container py-5 profile-page">
  <h1>Mon Profil</h1>

  <div class="profile-card">
    <!-- Section Avatar avec upload -->
    <div class="position-relative d-inline-block">
      <%= image_tag current_user.avatar_url,
          alt: "Avatar",
          class: "avatar",
          style: "width: 150px; height: 150px; object-fit: cover; border-radius: 50%;" %>

      <!-- Badge pour changer l'avatar -->
      <%= link_to edit_profile_path,
          class: "position-absolute bottom-0 end-0 btn btn-sm btn-primary rounded-circle p-2",
          style: "transform: translate(-10%, -10%); width: 40px; height: 40px;",
          title: "Modifier la photo" do %>
        <i class="fas fa-camera"></i>
      <% end %>
    </div>

    <div class="name">
      <%= current_user.first_name %> <%= current_user.last_name %>
      <% if current_user.first_name.blank? && current_user.last_name.blank? %>
        <%= current_user.email.split('@').first.capitalize %>
      <% end %>
    </div>

    <div class="location">üìç Paris, France</div>

    <% if current_user.bio.present? %>
      <div class="bio mt-3">
        <p class="text-muted">Mes sports favoris: <%= current_user.sports.join(", ") %></p>
      </div>
    <% end %>

    <!-- Bouton pour √©diter le profil -->
    <div class="mt-3">
      <%= link_to "Modifier mon profil", edit_profile_path, class: "btn btn-outline-primary" %>
    </div>
  </div>

  <h2>üìÖ Mes √©v√©nements</h2>
  <!-- ta liste des events ici -->
  <% if @events.any? %>
    <ul class="list-group">
      <% @events.each do |event| %>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <strong><%= event.title %></strong><br>
            <small class="text-muted"><%= event.location %> ‚Äî <%= l(event.starts_at, format: :long) %></small>
          </div>
          <%= link_to "Voir", event_path(event), class: "btn btn-sm btn-outline-primary" %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p class="text-muted">Tu ne participes encore √† aucun √©v√©nement.</p>
  <% end %>
</div>

<style>
  .profile-page {
    max-width: 800px;
    margin: 0 auto;
  }

  .profile-card {
    background: white;
    border-radius: 15px;
    padding: 30px;
    text-align: center;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    margin-bottom: 30px;
  }

  .avatar {
    border: 4px solid #fff;
    box-shadow: 0 2px 10px rgba(0,0,0,0.15);
    transition: transform 0.3s ease;
  }

  .avatar:hover {
    transform: scale(1.05);
  }

  .name {
    font-size: 24px;
    font-weight: bold;
    margin-top: 15px;
    color: #333;
  }

  .location {
    color: #666;
    margin: 10px 0;
  }

  .bio {
    max-width: 500px;
    margin: 15px auto;
    font-style: italic;
  }

  .sports {
    margin-top: 20px;
  }

  .sports .badge {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 8px 15px;
    border-radius: 20px;
    margin: 0 5px;
    display: inline-block;
    font-weight: 500;
  }

  .list-group-item {
    border-radius: 10px;
    margin-bottom: 10px;
    border: 1px solid #e0e0e0;
    transition: transform 0.2s ease;
  }

  .list-group-item:hover {
    transform: translateX(5px);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
</style>
